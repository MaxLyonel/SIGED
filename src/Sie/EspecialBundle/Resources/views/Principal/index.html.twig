{% extends 'layoutEspecialSie.html.twig' %}

{% block contentoption %}

<!-- Start page header -->
    <div class="header-content">
        <h2><i class="fa fa-table"></i> Panel principal <span>Inicio</span></h2>
        <div class="breadcrumb-wrapper hidden-xs">
            <span class="label">Usted esta aquí:</span>
            <ol class="breadcrumb">
                <li class="active">Inicio</li>
            </ol>
        </div><!-- /.breadcrumb-wrapper -->
    </div><!-- /.header-content -->
    <!--/ End page header -->
    {#<div class="body-content animated fadeIn">
        <div class="row">
            <div class="col-md-12">
                <p class="lead">Estadísticas</p>
                <!-- Start default tabs -->
                <div class="panel panel-tab rounded shadow">
                    <!-- Start tabs heading -->
                    <div class="panel-heading no-padding">
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="component-tabsaccordion.html#tab-{{gestionactual}}" data-toggle="tab" onclick="registroConsol({{gestionactual}})">
                                    <i class="fa fa-list"></i>
                                    <span>Gestión {{gestionactual}}</span>
                                </a>
                            </li>
                            {% for gestion in gestiones %}
                                <li>
                                    <a href="component-tabsaccordion.html#tab-{{gestion}}" data-toggle="tab" onclick="registroConsol({{gestion}})">
                                        <i class="fa fa-list"></i>
                                        <span>Gestión {{gestion}}</span>
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div><!-- /.panel-heading -->
                    <!--/ End tabs heading -->

                    <!-- Start tabs content -->
                    <div class="panel-body">
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="tab-{{gestionactual}}">
                                <h4>Reporte de cierre de operativos por gestión y Centro de Educación Especial - Gestión {{gestionactual}}</h4>
                                <div id="table-{{gestionactual}}" class="row">
                                    {% include 'SieEspecialBundle:Institucioneducativa:consol_especial.html.twig' with {'consolEspecial': consolEspecial} %}
                                </div>
                            </div>
                            {% for gestion in gestiones %}
                                <div class="tab-pane fade" id="tab-{{gestion}}">
                                    <h4>Reporte de cierre de operativos por gestión y Centro de Educación Especial - Gestión {{gestion}}</h4>
                                    <div id="table-{{gestion}}" class="row"></div>
                                </div>
                            {% endfor %}
                        </div>
                    </div><!-- /.panel-body -->
                    <!--/ End tabs content -->
                </div><!-- /.panel -->
                <!--/ End default tabs -->

            </div>
        </div><!-- /.row -->
    </div>#}
{% endblock %}
{% block javascripts %}
    {{parent()}}
    <!--script>
        var registroConsol = function (gestionid) {
            $.ajax({
                type: 'get',
                url: Routing.generate('herramienta_especial_registro_consol', {'gestionid': gestionid}),
                beforeSend: function () {
                    $("#table-"+gestionid).empty();
                    $("#table-"+gestionid).append('<div class="text-center"><img src="{{asset('img/loading.gif')}}" class="loading img-responsive" style="width: 80px;" /></div>');
                },
                success: function (data) {
                    $('#listaConsol').remove();
                    $("#table-"+gestionid).empty();
                    $("#table-"+gestionid).append(data);
                    cargatablas();
                },
                statusCode: {
                    500: function () {

                    },
                    404: function () {

                    }
                }
            });
        };

        var cargatablas = function (identif){
            // Setup - add a text input to each footer cell
            $('#listaConsol tfoot th').each( function () {
                var title = $(this).text();
                if(title.trim() === "" || title === "#" || title === "Bim. 1" || title === "Bim. 2" || title === "Bim. 3" || title === "Bim. 4"){
                    $(this).html('');
                } else {
                    $(this).html( '<input type="text" class="form-control" style="width: 100%; box-sizing: border-box;" placeholder="Buscar '+title+'" />' );
                }
            } );

            // DataTable
            var table = $('#listaConsol').DataTable( {
                    "order": [[ 0, "asc" ]],
                    "columnDefs": [
                        { "orderable": false, "targets": [8,7,6,5] }
                    ],
                }
            );

            // Apply the search
            table.columns().every( function () {
                var that = this;

                $( 'input', this.footer() ).on( 'keyup change', function () {
                    if ( that.search() !== this.value ) {
                        that
                            .search( this.value )
                            .draw();
                    }
                } );
            } );
        };

        $(window).load(function(){
            cargatablas();
        });
    </script-->
{% endblock %}