{% extends app.session.get('layout') %}
{% block stylesheets %}
    {{parent()}}
    <style>

        [v-cloak]{
            display: none;
        }
     
    </style>    

{% endblock %}
{% block contentoption %}


    <div class="header-content">
        <h2><i class="fa fa-table"></i>Homónimo <span>Menu principal</span></h2>
        <div class="breadcrumb-wrapper hidden-xs">
            <span class="label">Usted esta aquí:</span>
            <ol class="breadcrumb">
                <li>
                    <i class="fa fa-home"></i>
                    <a href="{{path('ccalidad_index')}}">Inicio</a>
                    <i class="fa fa-angle-right"></i>
                </li>

                <li class="active">Registro</li>
            </ol>
        </div>
    </div> 
    <!-- /.row -->
<div id="app" v-cloak>
<div >

    <div class="body-content animated fadeIn">

        <div class="row">
            <div class="col-xs-12 col-lg-12">
                <div class="panel panel-icon panel-default">
                    <div class="panel-heading">

                        <div v-if="responseObject.messageqa != ''" class="alert alert-warning" role="alert" >
                          ${responseObject.messageqa}
                        </div>                        

                      
                        <div class="pull-right"></div>  
                        </br>
                       
                            <form>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                    <label for="rudea">Código Rude</label>
                                    <input type="text" v-model="responseObject.rudea" class="form-control" id="rudea" style="text-transform:uppercase">
                                    </div>
                                    <div class="form-group col-md-6">
                                    <label for="rudeb">Código Rude</label>
                                    <input type="text" v-model="responseObject.rudeb" class="form-control" id="rudeb" style="text-transform:uppercase">
                                    </div>
                                </div>
                                
                                <button v-on:click="showhistories()" type="button" class="btn btn-primary" >Ver Historiales</button>
                                </form>
                        
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12 col-lg-12">
                <div v-if="buscando" class="text-center">
                    <img src="{{asset('img/loading.gif')}}" alt=""> Verificando...
                </div>
            </div>
        </div>

        <div v-if="!swresponse">
            <strong>${message}</strong>
        </div>
        <div v-if="swresponse">
            
        </div>
        {# response start #}
        <div class="row"  >
          <div v-if="swhistory" >
           <div class="table-responsive">
              <table class="table" border="0">
                <thead>
                  <tr>
                    <th scope="col" colspan="2">RESULTADO DE LA BÚSQUEDA</th>
                  
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    

                    <th scope="row">
                      <div class="table-responsive">
                        <table style="font-size:11px">
                          <tr>
                            <td>

                              <table>
                                <tr><td>RUDE:</td> <td>${studenta.codigoRude}</td> </tr>
                                <tr><td>PATERNO: <td>${studenta.paterno}</td></td></tr>
                                <tr><td>MATERNO: <td>${studenta.materno}</td></td></tr>
                                <tr><td>NOMBRE(S): <td>${studenta.nombre}</td></td></tr>
                                <tr><td>CI: <td>${studenta.ci}</td></td></tr>
                                <tr><td>COMPLEMENTO: <td>${studenta.complemento}</td></td></tr>
                                <tr><td>FECHA NACIMIENTO:</td> <td>${studenta.fechaNac}</td></tr>
                              </table> 

                            </td>
                          </tr>
                          <tr>
                            <td>
                              <div v-if="studentHistoryRegA">

                                                <h4 align="center" class="text-primary">Educación Regular</h4><hr>
                                                <div class="table-responsive">
                                                    <table class="table table-hover table-bordered" style="font-size:11px">
                                                        <thead>
                                                        <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">SIE</th>
                                                        <th class="text-center">Unidad Educativa</th>
                                                        <th class="text-center">Nivel</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Paralelo</th>
                                                        <th class="text-center">Turno</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        </tr>
                                                        </thead>

                                                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                            <tr v-for="(historyR, index) in studentHistoryRegA">
                                                                <td>${historyR.gestion_tipo_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_raep}</td>
                                                                <td>${historyR.nivel_r}</td>
                                                                <td>${historyR.grado_r}</td>
                                                                <td>${historyR.paralelo_raep}</td>
                                                                <td>${historyR.turno_raep}</td>
                                                                <td class="text-center">${historyR.estadomatricula_fin_r}</td>
                                                                <td v-if="responseObject.unificationIniPriCase2 && historyR.gestion_tipo_id_raep == currentyear && historyR.estadomatricula_tipo_id_fin_r == 4" class="text-center">
                                                                   <label><input type="radio" id="swInscriptionA" value="swInscriptionA" name="swInscription" v-model="selectedInscriptionEfectivo">Mantener ESTADO</label>
                                                                </td>

                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryAltA">

                                                <h4 align="center" class="text-primary">Educación Alternativa</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestión</th>
                                                    <th class="text-center">SIE / Subcentro</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Periodo</th>
                                                    <th class="text-center">Acreditación</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Especialidad</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyA, index) in studentHistoryAltA">
                                                        <td>${historyA.gestion_tipo_id_raep}</td>
                                                        <td>${historyA.institucioneducativa_id_raep} - ${historyA.sucursal_tipo_id_a}</td>
                                                        <td>${historyA.institucioneducativa_raep}</td>
                                                        <td>${historyA.periodo_raep}</td>
                                                        <td>${historyA.acreditacion_a}</td>
                                                        <td>${historyA.facultad_area_a}</td>
                                                        <td>${historyA.especialidad_a}</td>
                                                        <td>${historyA.paralelo_raep}</td>
                                                        <td>${historyA.turno_raep}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>                            

                                            <div v-if="studentHistoryEspA">

                                                <h4 align="center" class="text-primary">Educación Especial</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped" aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestion</th>
                                                    <th class="text-center">SIE</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Nivel</th>
                                                    <th class="text-center">Grado</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    <th class="text-center">Técnico</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyE, index) in studentHistoryEspA">
                                                        <td>${historyE.gestion_tipo_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_raep}</td>
                                                        <td>${historyE.area_especial_e}</td>
                                                        <td>${historyE.nivel_e}</td>
                                                        <td>${historyE.grado_e}</td>
                                                        <td>${historyE.paralelo_raep}</td>
                                                        <td>${historyE.turno_raep}</td>
                                                        <td>${historyE.tecnica_e}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryPerA">

                                                <h4 align="center" class="text-primary">Programa Nacional de Post-alfabetización</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">Lugar</th>
                                                        <th class="text-center">Plan</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Fecha Inicio</th>
                                                        <th class="text-center">Fecha Fin</th>
                                                        <th class="text-center">Id Curso</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyP, index) in studentHistoryPerA">
                                                        <td>${historyP.gestion}</td>
                                                        <td>${historyP.institucioneducativa}</td>
                                                        <td>${historyP.partp}</td>
                                                        <td>${historyP.bloquep}</td>
                                                        <td></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </th>

                    <th scope="row">
                      <div class="table-responsive">
                        <table style="font-size:11px">
                          <tr>
                            <td>
                               <table>
                                <tr><td>RUDE:</td> <td>${studentb.codigoRude}</td> </tr>
                                <tr><td>PATERNO: <td>${studentb.paterno}</td></td></tr>
                                <tr><td>MATERNO: <td>${studentb.materno}</td></td></tr>
                                <tr><td>NOMBRE(S): <td>${studentb.nombre}</td></td></tr>
                                <tr><td>CI: <td>${studentb.ci}</td></td></tr>
                                <tr><td>COMPLEMENTO: <td>${studentb.complemento}</td></td></tr>
                                <tr><td>FECHA NACIMIENTO:</td> <td>${studentb.fechaNac}</td></tr>
                              </table>  
                            </td>
                          </tr>
                          <tr>
                            <td>
                                              <div v-if="studentHistoryRegB">

                                                <h4 align="center" class="text-primary">Educación Regular</h4><hr>
                                                <div class="table-responsive">
                                                    <table class="table table-hover table-bordered" style="font-size:11px">
                                                        <thead>
                                                        <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">SIE</th>
                                                        <th class="text-center">Unidad Educativa</th>
                                                        <th class="text-center">Nivel</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Paralelo</th>
                                                        <th class="text-center">Turno</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        </tr>
                                                        </thead>

                                                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                            <tr v-for="(historyR, index) in studentHistoryRegB">
                                                                <td>${historyR.gestion_tipo_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_raep}</td>
                                                                <td>${historyR.nivel_r}</td>
                                                                <td>${historyR.grado_r}</td>
                                                                <td>${historyR.paralelo_raep}</td>
                                                                <td>${historyR.turno_raep}</td>
                                                                <td class="text-center">${historyR.estadomatricula_fin_r}</td>
                                                                <td v-if="responseObject.unificationIniPriCase2 && historyR.gestion_tipo_id_raep == currentyear && historyR.estadomatricula_tipo_id_fin_r == 4" class="text-center"> <label><input type="radio" id="swInscriptionB" value="swInscriptionB" name="swInscription" v-model="selectedInscriptionEfectivo">Mantener ESTADO</label></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                            <div v-if="studentHistoryAltB">

                                                <h4 align="center" class="text-primary">Educación Alternativa</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestión</th>
                                                    <th class="text-center">SIE / Subcentro</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Periodo</th>
                                                    <th class="text-center">Acreditación</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Especialidad</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyA, index) in studentHistoryAltB">
                                                        <td>${historyA.gestion_tipo_id_raep}</td>
                                                        <td>${historyA.institucioneducativa_id_raep} - ${historyA.sucursal_tipo_id_a}</td>
                                                        <td>${historyA.institucioneducativa_raep}</td>
                                                        <td>${historyA.periodo_raep}</td>
                                                        <td>${historyA.acreditacion_a}</td>
                                                        <td>${historyA.facultad_area_a}</td>
                                                        <td>${historyA.especialidad_a}</td>
                                                        <td>${historyA.paralelo_raep}</td>
                                                        <td>${historyA.turno_raep}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>                            

                                            <div v-if="studentHistoryEspB">

                                                <h4 align="center" class="text-primary">Educación Especial</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped" aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestion</th>
                                                    <th class="text-center">SIE</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Nivel</th>
                                                    <th class="text-center">Grado</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    <th class="text-center">Técnico</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyE, index) in studentHistoryEspB">
                                                        <td>${historyE.gestion_tipo_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_raep}</td>
                                                        <td>${historyE.area_especial_e}</td>
                                                        <td>${historyE.nivel_e}</td>
                                                        <td>${historyE.grado_e}</td>
                                                        <td>${historyE.paralelo_raep}</td>
                                                        <td>${historyE.turno_raep}</td>
                                                        <td>${historyE.tecnica_e}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryPerB">

                                                <h4 align="center" class="text-primary">Programa Nacional de Post-alfabetización</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">Lugar</th>
                                                        <th class="text-center">Plan</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Fecha Inicio</th>
                                                        <th class="text-center">Fecha Fin</th>
                                                        <th class="text-center">Id Curso</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        <th class="text-center">Acciones</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyP, index) in studentHistoryPerB">
                                                        <td>${historyP.gestion}</td>
                                                        <td>${historyP.institucioneducativa}</td>
                                                        <td>${historyP.partp}</td>
                                                        <td>${historyP.bloquep}</td>
                                                        <td></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </th>
                    
                  </tr>
                  <tr style="background-color: #EDEC97;" v-for="obsMessage in arrMessage"  ><td colspan="2" > ${obsMessage} </td> </tr>                  
                </tbody>
              </table>
               <h4 align="center" class="text-primary">Información adicional de Homónimos</h4><hr>
              <table align="left">
                  <tr >
                    <td>
                      <div class="row">
                         <div class="col-sm-12">
                            <label for="sie22">Porqué lo considera como homónimo?</label><br/>
                              <textarea id="justificacion" rows="2" cols="100" placeholder="Breve descripción" v-model="datosEstudiante.justificacion"> </textarea>
                         </div>
                      </div>
                    </td >
                  </tr >
                  <tr >
                    <td colspan="2">
                      <div class="row">
                          <div class="col-sm-12">
                            <label for="doc">Adjuntar Documento, formatos permitidos jpg,pdf no mayor a 2MB </label>
                                <input type="file" name="image" @change="getImage" accept="file/*" class="form-control" id="archivoAdjuntoId">
                          </div>
                      </div>
                    </td >
                  </tr >
                  <tr >
                    <td align="center" ><br/> <button type="button" class="btn btn-success" v-on:click="guardar()">Guardar</button> </td>
                  </tr>
                </table>
            </div> 
          </div>
        </div>


         <div class="row" v-if="showUnification" >
          <div v-if="showUnification" >
           <div class="table-responsive">
              <table class="table" border="0">
                <thead>
                  <tr>
                    <th scope="col" colspan="2">----VISTA PREVIA DE LA UNIFICACION </th>
                  
                  </tr>
                </thead>
                <tbody>
                          <tr>
                            <td>

                              <table>
                                <tr><td>RUDE---------:</td> <td>${studentCorrect.codigoRude}</td> </tr>
                                <tr><td>PATERNO: <td>${studentCorrect.paterno}</td></td></tr>
                                <tr><td>MATERNO: <td>${studentCorrect.materno}</td></td></tr>
                                <tr><td>NOMBRE(S): <td>${studentCorrect.nombre}</td></td></tr>
                                <tr><td>CI: <td>${studentCorrect.ci}</td></td></tr>
                                <tr><td>COMPLEMENTO: <td>${studentCorrect.complemento}</td></td></tr>
                                <tr><td>FECHA NACIMIENTO:</td> <td>${studentCorrect.fechaNac}</td></tr>
                              </table> 

                            </td>
                          </tr>
                          <tr>
                            <td>
                                        <div v-if="studentHistoryRegCorrect">

                                                <h4 align="center" class="text-primary">Educación Regular</h4><hr>
                                                <div class="table-responsive">
                                                    <table class="table table-hover table-bordered" style="font-size:11px">
                                                        <thead>
                                                        <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">SIE</th>
                                                        <th class="text-center">Unidad Educativa</th>
                                                        <th class="text-center">Nivel</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Paralelo</th>
                                                        <th class="text-center">Turno</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        </tr>
                                                        </thead>

                                                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                            <tr v-for="(historyR, index) in studentHistoryRegCorrect">
                                                                <td>${historyR.gestion_tipo_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_raep}</td>
                                                                <td>${historyR.nivel_r}</td>
                                                                <td>${historyR.grado_r}</td>
                                                                <td>${historyR.paralelo_raep}</td>
                                                                <td>${historyR.turno_raep}</td>
                                                                <td class="text-center">${historyR.estadomatricula_fin_r}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryAltCorrect">

                                                <h4 align="center" class="text-primary">Educación Alternativa</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestión</th>
                                                    <th class="text-center">SIE / Subcentro</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Periodo</th>
                                                    <th class="text-center">Acreditación</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Especialidad</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyA, index) in studentHistoryAltCorrect">
                                                        <td>${historyA.gestion_tipo_id_raep}</td>
                                                        <td>${historyA.institucioneducativa_id_raep} - ${historyA.sucursal_tipo_id_a}</td>
                                                        <td>${historyA.institucioneducativa_raep}</td>
                                                        <td>${historyA.periodo_raep}</td>
                                                        <td>${historyA.acreditacion_a}</td>
                                                        <td>${historyA.facultad_area_a}</td>
                                                        <td>${historyA.especialidad_a}</td>
                                                        <td>${historyA.paralelo_raep}</td>
                                                        <td>${historyA.turno_raep}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>                            

                                            <div v-if="studentHistoryEspCorrect">

                                                <h4 align="center" class="text-primary">Educación Especial</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped" aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestion</th>
                                                    <th class="text-center">SIE</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Nivel</th>
                                                    <th class="text-center">Grado</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    <th class="text-center">Técnico</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyE, index) in studentHistoryEspCorrect">
                                                        <td>${historyE.gestion_tipo_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_raep}</td>
                                                        <td>${historyE.area_especial_e}</td>
                                                        <td>${historyE.nivel_e}</td>
                                                        <td>${historyE.grado_e}</td>
                                                        <td>${historyE.paralelo_raep}</td>
                                                        <td>${historyE.turno_raep}</td>
                                                        <td>${historyE.tecnica_e}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryPerCorrect">

                                                <h4 align="center" class="text-primary">Programa Nacional de Post-alfabetización</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">Lugar</th>
                                                        <th class="text-center">Plan</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Fecha Inicio</th>
                                                        <th class="text-center">Fecha Fin</th>
                                                        <th class="text-center">Id Curso</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        <th class="text-center">Acciones</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyP, index) in studentHistoryPerCorrect">
                                                        <td>${historyP.gestion}</td>
                                                        <td>${historyP.institucioneducativa}</td>
                                                        <td>${historyP.partp}</td>
                                                        <td>${historyP.bloquep}</td>
                                                        <td></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>
                            </td>


                          <td v-if="!responseObject.unificationIniPri">
                            
                                        <div v-if="studentHistoryRegCorrect2">

                                                <h4 align="center" class="text-primary">Educación Regular</h4><hr>
                                                <div class="table-responsive">
                                                    <table class="table table-hover table-bordered" style="font-size:11px">
                                                        <thead>
                                                        <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">SIE</th>
                                                        <th class="text-center">Unidad Educativa</th>
                                                        <th class="text-center">Nivel</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Paralelo</th>
                                                        <th class="text-center">Turno</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        </tr>
                                                        </thead>

                                                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                            <tr v-for="(historyR, index) in studentHistoryRegCorrect2">
                                                                <td>${historyR.gestion_tipo_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_id_raep}</td>
                                                                <td>${historyR.institucioneducativa_raep}</td>
                                                                <td>${historyR.nivel_r}</td>
                                                                <td>${historyR.grado_r}</td>
                                                                <td>${historyR.paralelo_raep}</td>
                                                                <td>${historyR.turno_raep}</td>
                                                                <td class="text-center">${historyR.estadomatricula_fin_r}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryAltCorrect2">

                                                <h4 align="center" class="text-primary">Educación Alternativa</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestión</th>
                                                    <th class="text-center">SIE / Subcentro</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Periodo</th>
                                                    <th class="text-center">Acreditación</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Especialidad</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyA, index) in studentHistoryAltCorrect2">
                                                        <td>${historyA.gestion_tipo_id_raep}</td>
                                                        <td>${historyA.institucioneducativa_id_raep} - ${historyA.sucursal_tipo_id_a}</td>
                                                        <td>${historyA.institucioneducativa_raep}</td>
                                                        <td>${historyA.periodo_raep}</td>
                                                        <td>${historyA.acreditacion_a}</td>
                                                        <td>${historyA.facultad_area_a}</td>
                                                        <td>${historyA.especialidad_a}</td>
                                                        <td>${historyA.paralelo_raep}</td>
                                                        <td>${historyA.turno_raep}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>                            

                                            <div v-if="studentHistoryEspCorrect2">

                                                <h4 align="center" class="text-primary">Educación Especial</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped" aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                    <th class="text-center">Gestion</th>
                                                    <th class="text-center">SIE</th>
                                                    <th class="text-center">Centro</th>
                                                    <th class="text-center">Área</th>
                                                    <th class="text-center">Nivel</th>
                                                    <th class="text-center">Grado</th>
                                                    <th class="text-center">Paralelo</th>
                                                    <th class="text-center">Turno</th>
                                                    <th class="text-center">Técnico</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyE, index) in studentHistoryEspCorrect2">
                                                        <td>${historyE.gestion_tipo_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_id_raep}</td>
                                                        <td>${historyE.institucioneducativa_raep}</td>
                                                        <td>${historyE.area_especial_e}</td>
                                                        <td>${historyE.nivel_e}</td>
                                                        <td>${historyE.grado_e}</td>
                                                        <td>${historyE.paralelo_raep}</td>
                                                        <td>${historyE.turno_raep}</td>
                                                        <td>${historyE.tecnica_e}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>

                                            <div v-if="studentHistoryPerCorrect2">

                                                <h4 align="center" class="text-primary">Programa Nacional de Post-alfabetización</h4><hr>
                                                <div id="" class="dataTables_wrapper form-inline" role="grid">
                                                <table id="" class="table table-striped " aria-describedby="example-table_info" style="font-size:11px">
                                                    <thead>
                                                    <tr role="row">
                                                        <th class="text-center">Gestión</th>
                                                        <th class="text-center">Lugar</th>
                                                        <th class="text-center">Plan</th>
                                                        <th class="text-center">Grado</th>
                                                        <th class="text-center">Fecha Inicio</th>
                                                        <th class="text-center">Fecha Fin</th>
                                                        <th class="text-center">Id Curso</th>
                                                        <th class="text-center">Estado Matrícula</th>
                                                        <th class="text-center">Acciones</th>
                                                    </tr>
                                                    </thead>

                                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                                    <tr v-for="(historyP, index) in studentHistoryPerCorrect2">
                                                        <td>${historyP.gestion}</td>
                                                        <td>${historyP.institucioneducativa}</td>
                                                        <td>${historyP.partp}</td>
                                                        <td>${historyP.bloquep}</td>
                                                        <td></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                </div>

                                            </div>
                            
                          </td>


                          </tr>

                          <!-- ADD OTHER HISTORY -->

                          <!-- END ADD OTHER HISTORY -->
                          <tr v-if="showButtonUnification">
                            <td colspan="2" > <button class="btn btn-success" v-on:click="doUnification(studentCorrect.codigoRude, studentWrong.codigoRude, responseObject.unificationIniPri, responseObject.unificationIniPriCase2)" >Unificar</button> </td>
                          </tr>


                 
                </tbody>
              </table>
            </div> 
          </div>
        </div>

        <div class="row"  >
          <div class="col-md-12" >
            <div v-if="swDoneUnification" class="alert alert-success" role="alert">
             --- ${message}
            </div>
           
            
          </div>        
        </div>

        {# response end #}
    </div>
</div>
</div>

{% endblock %}
{% block javascripts%}
    {{parent()}}
    <script type="text/javascript">
        // $("#form_idfecnac").inputmask({ "alias": "dd-mm-yyyy", 'placeholder':'dd-mm-aaaa' });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.2/axios.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>   
      <script src="{{asset('js/inputmask.js')}}"></script>
    <script type="text/javascript">
// $("#form_idfecnac").inputmask({ "alias": "dd-mm-yyyy", 'placeholder':'dd-mm-aaaa' });
    
    Vue.filter('uppercase', function (value) {
        if (typeof value === "undefined") 
            return '';
            else
            return value.toUpperCase()
         })

        var app = new Vue({
            delimiters: ['${', '}'],
            el: '#app',
            data: {

                responseObject: {
              rudea:'{{rudeStudent.rudea}}',
              rudeb:'{{rudeStudent.rudeb}}',
              messageqa:'{{rudeStudent.messageqa}}',
              arrMessage:[],
              unificationIniPri:false,
              unificationIniPriCase2:false,
              unificationNormal:false,
              unificationForeign:false,
              rudeCorrect:false,
              rudeWrong:false,
              swChanteStatusCorrectInscription:false
              
            },
            selectedInscriptionEfectivo:'',
            buscando:false,
            
            studentHistoryRegA:{},
            studentHistoryAltA:{},
            studentHistoryEspA:{},
            studentHistoryPerA:{},

            studentHistoryRegB:{},
            studentHistoryAltB:{},
            studentHistoryEspB:{},
            studentHistoryPerB:{},

            studentHistoryRegCorrect:{},
            studentHistoryAltCorrect:{},
            studentHistoryEspCorrect:{},
            studentHistoryPerCorrect:{},

            studentHistoryRegCorrect2:{},
            studentHistoryAltCorrect2:{},
            studentHistoryEspCorrect2:{},
            studentHistoryPerCorrect2:{},

            swhistory:false,
            swDoneUnification:false,
            messageDoneUnification:'',
            studenta:{},
            studentb:{},
            // unificationIniPri:false,

            informe:'',
            justificacion:'',
            datosEstudiante:{},
            message:'',
            messageqa:'',
            currentyear:'',
            swresponse:true,

            },
            methods: {
                
                showhistories: function(){

                    if(this.responseObject.rudea == '' || this.responseObject.rudeb == '') {
                              Swal.fire(
                              'Campo Código Rude requerido',
                              'Debe insertar los Códigos Rudes',
                              'warning'
                              );
                              return;
                              
                    }

                    this.message='';
                    this.swresponse = true;
                    this.buscando = true;
                    this.swhistory = false;
                    this.showButtonUnification = false;

                    this.studentHistoryRegA = 0;
                    this.studentHistoryAltA = 0;
                    this.studentHistoryEspA = 0;
                    this.studentHistoryPerA = 0;

                    this.studentHistoryRegB = 0;
                    this.studentHistoryAltB = 0;
                    this.studentHistoryEspB = 0;
                    this.studentHistoryPerB = 0;

                    this.studentHistoryRegCorrect = {};
                    this.studentHistoryAltCorrect = {};
                    this.studentHistoryEspCorrect = {};
                    this.studentHistoryPerCorrect = {};

                    this.studentHistoryRegCorrect2 = {};
                    this.studentHistoryAltCorrect2 = {};
                    this.studentHistoryEspCorrect2 = {};
                    this.studentHistoryPerCorrect2 = {};

                    this.studentCorrect = {};
                    this.studentWrong = {};

                    this.studenta = {};
                    this.studentb = {};
                    this.showUnification = false;
                    this.swDoneUnification = false;
                    this.messageDoneUnification = '';
                    this.arrMessage = [];

                    this.studentCorrect = {};
                    this.studentWrong = {};
                    this.currentyear ='';
                    this.selectedInscriptionEfectivo ='';
                    this.responseObject.swChanteStatusCorrectInscription = false;
                    
                     axios.get(Routing.generate('homonimo_historial_estudiantes', this.responseObject ))
                    .then(response => {
                        if (response.status == 200) {
                            
                            this.swresponse = response.data.swresponse;
                            this.message = response.data.message;

                            this.studenta = response.data.studentA;
                            this.studentb = response.data.studentB;

                            this.studentHistoryRegA  = response.data.dataHistoryA.dataInscriptionR;
                                this.studentHistoryAltA  = response.data.dataHistoryA.dataInscriptionA;
                                this.studentHistoryEspA  = response.data.dataHistoryA.dataInscriptionE;
                                this.studentHistoryPerA  = response.data.dataHistoryA.dataInscriptionP;

                            this.studentHistoryRegB  = response.data.dataHistoryB.dataInscriptionR;
                            this.studentHistoryAltB  = response.data.dataHistoryB.dataInscriptionA;
                            this.studentHistoryEspB  = response.data.dataHistoryB.dataInscriptionE;
                            this.studentHistoryPerB  = response.data.dataHistoryB.dataInscriptionP;

                            this.responseObject.rudea = response.data.rudea;
                            this.responseObject.rudeb = response.data.rudeb;
                            this.responseObject.unificationIniPri = response.data.unificationIniPri;                            
                            this.responseObject.unificationIniPriCase2 = response.data.unificationIniPriCase2;
                            this.responseObject.unificationNormal = response.data.unificationNormal;
                            this.responseObject.unificationForeign = response.data.unificationForeign;


                            this.swhistory = response.data.swhistory;
                            this.currentyear = response.data.currentyear;
                            this.arrMessage = response.data.arrMessage;
                            
                        }                        
                        this.buscando = false;
                    })
                    .catch(e => {
                        console.log(e);
                        this.buscando = false;
                    });

                },
                sumLength: function(reg,alt,esp,per){
                  var total = 0 ;
                      if(reg){
                        total = total + parseInt(reg.length);
                      }
                      if(alt){
                        total = total + parseInt(alt.length);
                      }
                      if(esp){
                        total = total + parseInt(esp.length);
                      }
                      if(per){
                        total = total + parseInt(per.length);
                      }

                      return total;

                },
      
                guardar: function(){
                     if (typeof this.datosEstudiante.justificacion === "undefined") {
                        Swal.fire(
                                'Justificación',
                                'Debe ingresar una justificación ',
                                'warning'
                                );
                            this.buscando = false;
                                  return;
                      }
                     
                  // get the correct rudes
                    //this.responseObject.rudeCorrect = rudeCorrect;
                    //this.responseObject.rudeWrong = rudeWrong;
                    //this.swDoneUnification = false;
                    Swal.fire({
                        title: 'Es homónimo',
                        text: "¿Esta seguro de guardar los datos?",
                        type: 'question',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Si, proceder',
                        cancelButtonText: 'Cancelar'
                    }).then((result) => {
                      if (result.value) {
                        this.datosEstudiante.estudiantea=this.studenta.id;
                        this.datosEstudiante.estudianteb=this.studentb.id;
                    
                        var data = new FormData();
                          data.append('datos', JSON.stringify(this.datosEstudiante));
                          data.append('informe', this.informe);
                          axios.post(Routing.generate('homonimo_guardar_estudiantes'), data )
                        .then(response => {

                            if (response.status == 200) {

                              // clear the all view
                              this.buscando = true;
                              this.message='';
                              this.swresponse = true;
                              this.buscando = true;
                              this.swhistory = false;
                              this.showButtonUnification = false;

                              this.studentHistoryRegA = 0;
                              this.studentHistoryAltA = 0;
                              this.studentHistoryEspA = 0;
                              this.studentHistoryPerA = 0;

                              this.studentHistoryRegB = 0;
                              this.studentHistoryAltB = 0;
                              this.studentHistoryEspB = 0;
                              this.studentHistoryPerB = 0;

                              this.studentHistoryRegCorrect = {};
                              this.studentHistoryAltCorrect = {};
                              this.studentHistoryEspCorrect = {};
                              this.studentHistoryPerCorrect = {};

                              this.studentHistoryRegCorrect2 = {};
                              this.studentHistoryAltCorrect2 = {};
                              this.studentHistoryEspCorrect2 = {};
                              this.studentHistoryPerCorrect2 = {};

                              this.studentCorrect = {};
                              this.studentWrong = {};

                              this.studenta = {};
                              this.studentb = {};
                              this.showUnification = false;
                              this.swDoneUnification = false;
                              this.messageDoneUnification = '';

                              this.studentCorrect = {};
                              this.studentWrong = {};
                              this.responseObject.rudea = '';
                              this.responseObject.rudeb = ''
                              // end clear the all view   
                              
                              this.swDoneUnification = response.data.swDoneUnification;
                              this.message = response.data.message;                             
                             
                            }                        
                            this.buscando = false;
                        })
                        .catch(e => {
                            console.log(e);
                            this.buscando = false;
                        });

                      }
                  })

                },
                  getImage: function(event){
                    var informe = event.target.files[0];
                    var allowedExtensions = /(.jpg|.jpeg|.png|.gif|.pdf)$/i;
                    if(!allowedExtensions.exec(event.target.value)){
                        event.target.value = '';
                        Swal.fire(
                              'Archivo incorrecto!',
                              'El archivo adjunto debe ser una imagen o un archivo pdf',
                              'warning'
                            );
                        this.informe = '';
                        return false;
                    }else{
                        var megas = (informe.size / 1024)/1024;
                        if (megas > 2) {
                            event.target.value = '';
                            Swal.fire(
                              'Tamaño no permitido!',
                              'El archivo debe tener un tamaño menor a 2MB',
                              'warning'
                            );
                            this.informe = '';
                            return false;
                        }
                    }
                    this.informe = event.target.files[0];
                },  

   
              customFormatter(date) {
                  return moment(date).format('l');
                },
              },
              mounted(){
              }
        });

        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip();
            $("td").focus();
        });        



    </script>
{%endblock%}
