{% extends 'layoutHerramientaAlternativa.html.twig' %}
{% block contentoption %}
    <div class="header-content">
        <h2><i class="fa fa-th-large"></i>Habilitar Operativo</h2>
        <div class="breadcrumb-wrapper hidden-xs">
            <span class="label">Usted esta aqu√≠:</span>
            <ol class="breadcrumb">
               <li>
                    <i class="glyphicon glyphicon-leaf"></i>
                    <a href="{{path('principal_web')}}">Bienvenida/o</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li>
                    <i class="fa fa-th-large"></i>
                    <i class="fa fa-angle-right"></i>
                </li>
            </ol>
        </div><!-- /.breadcrumb-wrapper -->
    </div>  
    <div class="row">
        <div class="body-content animated fadeIn">
            <div class="panel panel-success">
                {% for flashMessage in app.session.flashbag.get('exito') %}
                    <div class="alert alert-success alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <strong><i class='fa fa-linux'></i></strong> {{ flashMessage }}
                    </div>
                {% endfor %}
                {% for flashMessage in app.session.flashbag.get('error') %}
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <strong><i class='fa fa-linux'></i></strong> {{ flashMessage }}
                    </div>
                {% endfor %}
                <div class="panel-heading">
                    <div class="pull-left">
                        <h3 class="panel-title">Seleccione el operativo</h3>
                    </div>
                    <div class="clearfix"></div>
                </div><!-- /.panel-heading -->
                <div class="panel-body">
                    {{form_start(form, { 'attr': {'data-toggle': 'validator','role': 'form', 'id': 'form_operativo'} } )}}
                        <div class="row">
                            <div class="form-group col-md-4">
                                <div class="col-md-3">
                                    {{ form_label(form.operativo)}}
                                </div>
                                <div class="col-md-9">
                                    {{form_widget(form.operativo) }}
                                </div>
                            </div>
                            <div class="form-group col-md-3">
                                <div class="col-md-4">
                                    {{ form_label(form.fechainicio)}}
                                </div>
                                <div class="col-md-8">
                                    {{form_widget(form.fechainicio) }}
                                </div>
                            </div>
                            
                            <div class="form-group col-md-3">
                                <div class="col-md-3">
                                    {{ form_label(form.fechafin)}}
                                </div>
                                <div class="col-md-8">
                                    {{form_widget(form.fechafin) }}
                                </div>
                            </div>
                            <div class="form-group col-md-2"> 
                                <div class="col-md-12">
                                    {{ form_widget(form.buscar) }}
                                </div>
                            </div>
                        </div>
                    {{form_end(form)}}
                    <div id="ceas">
                    </div>
                </div><!-- /.panel-body -->
            </div><!-- /.panel -->
        </div>
    </div>
{% endblock %}   
{% block javascripts %}
    {{ parent() }}
    <script>
        function buscarCeas(){
            //alert('entra');
            var dataform = $('#form_operativo').serialize();
            $.ajax({
                type: 'get',
                data: dataform,
                url: "{{path('alternativa_operativo_buscar_oeprativos_ceas')}}",
                beforeSend: function () {
                    $('#ceas').empty();
                    $("#ceas").append('<div style="text-align:center">Cargando datos...<img src="{{asset('img/loading.gif')}}" /></div>');
                },
                success: function (data) {
                    $('#ceas').empty();
                    $('#ceas').append(data);
                }
            });

        }
        /*$( document ).ready(function() {
            cargatablas();
        });*/

        var cargatablas = function (identif){
            // Setup - add a text input to each footer cell
            $('#datatable tfoot th').each( function () {
                var title = $(this).text();
                if(title.trim() === "" || title === "No." || title === "Acciones"){
                    $(this).html('');
                } else {
                    $(this).html( '<input type="text" class="form-control" style="width: 100%; box-sizing: border-box;" placeholder="Buscar '+title+'" />' );
                }
            } );
            // DataTable
            var table = $('#datatable').DataTable( {
                "order": [[ 0, "asc" ]],
                "columnDefs": [
                    { "orderable": false, "targets": [0] }
                    ],
                }
            );
            // Apply the search
            table.columns().every( function () {
                var that = this;
                $( 'input', this.footer() ).on( 'keyup change', function () {
                    if ( that.search() !== this.value ) {
                        that
                        .search( this.value )
                        .draw();
                    }
                } );
            } );
        };

        function seleccionar(){ 
            $("#ok").change(function () {
                $("input:checkbox").prop('checked', $(this).prop("checked"));
            });
        }
    </script>
{% endblock %} 