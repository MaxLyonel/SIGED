{% extends 'SieAppWebBundle:Default:sie.html.twig' %}

{% block contentoption%}


    <div id="page-wrapper">
        <div class="row">
            <div class="page-header">
                <h3 class="heading pull-left"><i class="fa fa-file-text animated flip"></i> Administracion de Usuarios <span class="sub-heading">{{app.session.get('fullname')}}</span></h3>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="separator bottom"></div>
        <div class="row">

            <div class="col-md-12">
                <!-- Website Stats  Widget -->
                <div class="panel" id="dashboard-tour-visits">
                    <!--h1 class="page-header">Resultado de la Busqueda</h1-->
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="panel panel-icon panel-success">
                                    <div class="panel-heading">
                                        <i class="fa fa-search"></i> Resultado de la Busqueda
                                    </div>
                                    <div class="panel-body">

                                        <div class="table-responsive">
                                            <table class="table table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Nombre</th>
                                                        <th>Parentesco</th>
                                                        <th>Telefono</th>
                                                        <th>Actions</th>
                                                        <th>Actions</th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    {% for entity in pagination %}

                                                        <tr>
                                                            <td>{{ entity.name}}</td>
                                                            <td>{{ entity.apoderado }}</td>
                                                            <td>{{ entity.fono }}</td>

                                                            <td><a href="{{path('usuario_main_create_account',{'id':entity.idapoderado})}}" data-toggle="tooltip" data-placement="top" title="{{ entity.name }}"><span class="fa fa-user"></span> Crear Cuenta</a></td>
                                                            <td><a href="{{path('my_app_user',{'idApoderado':entity.idapoderado})}}" data-toggle="tooltip" data-placement="top" title="{{ entity.name }}"><span class="glyphicon glyphicon-info-sign"></span>Modificar Cuenta</a></td>
                                                            <!--td><button type="button" onclick="myFunction(this)" {% if entity.active == 0 %}disabled="disabled"{% endif %} class="btn btn-primary btn-xs" data-toggle="modal" data-target="#myModal" data-title="Activar Cuenta">Activar</button></td>
                                                            <td><button type="button" {% if entity.active == 0 %}disabled="disabled"{% endif %} class="btn btn-primary btn-xs" data-toggle="modal" data-target="#myModal" data-title="Desactiva Cuenta">Desactivar</button></td-->
                                                            <!--td><button type="button" {% if entity.active == 0 %}disabled="disabled"{% endif %} class="btn btn-primary btn-xs" data-toggle="modal" data-target="#myModal" data-title="Modificar Cuenta">Modificar</button></td-->

                                                        </tr>
                                                    {% endfor %}

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <div class="panel-footer">
                                            <div class="paginacion">
                                                {{ knp_pagination_render(pagination) }}
                                            </div>
                                        </div>
                                    </div>

                                    <div id="output">


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>



        <!--div id="content">
            <form id="myForm" action="{{path('my_app_user')}}" method="POST" >
                Write your name here: 
                <input type="text" name="name" id="name_id" value="" /><br />
                <input type="submit" value="Send" />
            </form>
        </div-->

    </div>         


{% endblock %}

{% block javascripts %}
    <script src="{{asset('js/jquery.min.js')}}"></script>  
    <script src="{{asset('assets/js/bootstrap.min.js')}}"></script>
    <script id="dynamic" type="text/javascript">

        $(document).ready(function () {

        });


        function myFunction(abc) {
            $.ajax({
                url: "{{ path('my_app_user') }}",
                type: "POST",
                data: {"data": 'krlos'},
                success: function (data) {
                    $('#output').html(data.formulario);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown)
                {
                    alert('Error: ' + errorThrown);
                }
            });

            /*
             //get the url for the form
             var url = $("#myForm").attr("action");
             
             //start send the post request
             $.post(url, {
             formName: $("#name_id").val(),
             other: "attributes"
             }, function (data) {
             //the response is in the data variable
             
             if (data.responseCode == 200) {
             $('#output').html(data.formulario);
             $('#output').css("color", "Green");
             } else {
             //if we got to this point we know that the controller
             //did not return a json_encoded array. We can assume that           
             //an unexpected PHP error occured
             alert("An unexpeded error occured.");
             
             //if you want to print the error:
             $('#output').html('error');
             }
             });//It is silly. But you should not write 'json' or any thing as the fourth parameter. It should be undefined. I'll explain it futher down
             
             //we dont what the browser to submit the form
             return false;*/
        }

        //listen for the form beeing submitted
        $("#buttonactivar").click(function () {
        });


    </script>
{% endblock %}
