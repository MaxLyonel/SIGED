<style type="text/css">
	input[type='radio']{
		margin-left: 20px;
		margin-right: 5px;
	}
	.form-control{
		padding: 0px;
	}
	.tarjeta{
		border: 1px solid #CCCCCC;
		margin-bottom: 7px;
	}
	.tarjeta h5{
		margin-top: 0px;
		color: #46A9BF;
		font-weight: bold;
	}
	.numeroMaterias{
		font-weight: bold;
		font-size: 1.2em;
	}

</style>
<div class="modal-dialog">
	<div class="modal-content">
		<div class="panel panel-info">
			<div class="panel-heading">
				<h3 class="panel-title">Registro de Datos Generales del Curso</h3>
			</div>
			<div class="panel-body panel-default">
				<table class="table table-condensed table-bordered">
					<tr>
						<th>TURNO:</th><td>{{ curso.turnoTipo.turno }}</td>
						<th>GRADO:</th><td>{{ curso.gradoTipo.grado }}</td>
					</tr>
					<tr>
						<th>NIVEL:</th><td>{{ curso.nivelTipo.nivel }}</td>
						<th>PARALELO:</th><td>{{ curso.paraleloTipo.paralelo }}</td>
					</tr>
				</table>

				<div id="mensaje" class="alert alert-info text-center">
					<i class="fa fa-info-circle"></i> Complete los datos generales del curso
				</div>
				
				{{ form_start(form, {'attr': {'id':'formDatosCurso', 'onsubmit':'saveDatosCurso(); return false;'} }) }}
					<div class="panel panel-info">
						<div class="panel-body tarjeta" style="background: #FFFFFF;">
							<h5>1. EVALUACIÓN</h5>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>Cantidad de áreas</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{# <input type="text" name="areas" id="inputAreas" class="form-control" value="9" pattern="" title=""> #}
									<span class="numeroMaterias">{{ totalCursoOferta }}</span>
								</div>
							</div>
						</div>
						<div class="panel-body tarjeta" style="background: #FFFFFF; ">
							<h5>1. PRESENCIA DE LENGUAS EN EL AMBITO ESCOLAR</h5>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>1. Lengua más hablada (más frecuente)</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.idiomaMasHabladoTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>2. Lengua regularmente hablada (menos frecuente)</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.idiomaRegHabladoTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>3. Lengua menos hablada (pocp frecuente)</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.idiomaMenHabladoTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
						</div>
						<div class="panel-body tarjeta" style="background: #FFFFFF;">
							<h5>2. LENGUA EN LOS PROCESOS PEDAGÓGICOS</h5>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>1. Lengua del proceso pedagógico (primera lengua)</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.priLenEnsenanzaTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>2. Lengua del proceso pedagógico (segunda lengua)</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.segLenEnsenanzaTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>3. Lengua extranjera de apoyo en los procesos pedagógicos</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.terLenEnsenanzaTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
						</div>
						<div class="panel-body tarjeta" style="background: #FFFFFF;">
							<h5>3. DESAYUNO ESCOLAR</h5>
							<div class="row">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>¿Se porporciona desayuno escolar al curso?</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.desayunoEscolar, {'attr':{'class':''} }) }}
								</div>
							</div>
							<div class="row" id="financiamiento">
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									<p>Fuente de financiamiento del Desayuno Escolar</p>
								</div>
								<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
									{{ form_widget(form.finDesEscolarTipo, {'attr':{'class':'form-control chosen-select'} }) }}
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-right">
							<button onclick="" type="button" class="btn btn-danger" data-dismiss="modal"> <i class="fa fa-bad"></i> Cerrar</button>
							<button type="submit" class="btn btn-primary"> <i class="fa fa-save"></i> Guardar</button>
						</div>
					</div>

				{{ form_end(form) }}
											
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	
	function saveDatosCurso(){
		var data = $('#formDatosCurso').serialize();
		$.ajax({
			url: Routing.generate('herramienta_infoEstudianteDatosCurso_save'),
			type: 'post',
			data: data,
			beforeSend: function(){
				$('#mensaje').empty();
				$('#mensaje').append('<p> <i class="fa fa-refresh fa-spin"></i> Actualizando la información...</p>');
				$('#mensaje').addClass('alert-info');
				$('#mensaje').removeClass('alert-success');
				$('#mensaje').removeClass('alert-danger');
			},
			success: function(data){
				$('#mensaje').removeClass('alert-info');
				$('#mensaje').empty();
				if(data.status == 201){
					$('#mensaje').addClass('alert alert-success');
					$('#mensaje').append('<p> <i class="fa fa-check"></i> '+data.msg+'</p>');
				}else{
					$('#mensaje').addClass('alert alert-danger');
					$('#mensaje').append('<p> <i class="fa fa-times"></i> '+data.msg+'</p>');
				}
			},
			error: function(data){
				$('#mensaje').removeClass('alert-info');
				$('#mensaje').empty();
				$('#mensaje').addClass('alert alert-danger');
				$('#mensaje').append('<p> <i class="fa fa-times"></i> Ocurrio un error al actualizar la información</p>');
			}
		});
	}

	// $('#form_idiomaMasHabladoTipo').choice();
	$('.chosen-select').chosen({allow_single_deselect: false});

	$(function(){
		tieneDesayuno();
	});

	$('input:radio[name="form[desayunoEscolar]"]').on('change', function(){
		tieneDesayuno();
	});

	function tieneDesayuno(){
		var desayuno = $('input:radio[name="form[desayunoEscolar]"]:checked').val();
		if(desayuno == 1){
			$('#financiamiento').fadeIn('slow');;
		}else{
			$('#financiamiento').css('display','none');
		}
	}
	
</script>